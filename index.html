<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Tactical Dodge </title>
<style>
body{
    margin:0;
    background:#111;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family:Arial;
    color:white;
}

#gameContainer{
    display:flex;
    gap:30px;
}

#game{
    background:#1b1b1b;
    border:3px solid #00ffcc;
}

#ui{
    width:200px;
}

h2{
    margin-top:0;
}

button{
    padding:10px;
    width:100%;
    background:#00ffcc;
    border:none;
    font-weight:bold;
    cursor:pointer;
}

button:hover{
    background:#00ccaa;
}
</style>
</head>
<body>

<div id="gameContainer">
    <canvas id="game" width="500" height="500"></canvas>

    <div id="ui">
        <h2>SKOR</h2>
        <h1 id="score">0</h1>
        <p>Altın topla.<br>Düşmanlara değme.</p>
        <button onclick="restart()">Yeniden Başlat</button>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const gridSize = 5;
const cellSize = canvas.width / gridSize;

let player;
let gold;
let enemies = [];
let score = 0;
let gameSpeed = 1000;
let gameInterval;
let enemyInterval;

function init(){
    player = {x:2,y:2};
    enemies = [];
    score = 0;
    document.getElementById("score").innerText = score;
    spawnGold();
    clearInterval(gameInterval);
    clearInterval(enemyInterval);
    gameSpeed = 1000;
    gameInterval = setInterval(updateEnemies, gameSpeed);
    enemyInterval = setInterval(spawnEnemy, 2000);
    draw();
}

function spawnGold(){
    gold = {
        x: Math.floor(Math.random()*gridSize),
        y: Math.floor(Math.random()*gridSize)
    };
}

function spawnEnemy(){
    const edge = Math.floor(Math.random()*4);
    let enemy = {x:0,y:0};

    if(edge === 0){ enemy.x=0; enemy.y=Math.floor(Math.random()*gridSize); }
    if(edge === 1){ enemy.x=gridSize-1; enemy.y=Math.floor(Math.random()*gridSize); }
    if(edge === 2){ enemy.y=0; enemy.x=Math.floor(Math.random()*gridSize); }
    if(edge === 3){ enemy.y=gridSize-1; enemy.x=Math.floor(Math.random()*gridSize); }

    enemies.push(enemy);
}

function updateEnemies(){
    enemies.forEach(enemy=>{
        const dir = Math.floor(Math.random()*4);
        if(dir===0 && enemy.x>0) enemy.x--;
        if(dir===1 && enemy.x<gridSize-1) enemy.x++;
        if(dir===2 && enemy.y>0) enemy.y--;
        if(dir===3 && enemy.y<gridSize-1) enemy.y++;
    });

    checkCollision();
    draw();
}

function checkCollision(){
    for(let enemy of enemies){
        if(enemy.x===player.x && enemy.y===player.y){
            alert("GAME OVER\nSkor: "+score);
            init();
        }
    }
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Grid çiz
    ctx.strokeStyle="#333";
    for(let i=0;i<gridSize;i++){
        for(let j=0;j<gridSize;j++){
            ctx.strokeRect(i*cellSize,j*cellSize,cellSize,cellSize);
        }
    }

    // Gold
    ctx.fillStyle="gold";
    ctx.beginPath();
    ctx.arc(
        gold.x*cellSize + cellSize/2,
        gold.y*cellSize + cellSize/2,
        cellSize/4,
        0,
        Math.PI*2
    );
    ctx.fill();

    // Player
    ctx.fillStyle="#00ffcc";
    ctx.fillRect(player.x*cellSize+10,player.y*cellSize+10,cellSize-20,cellSize-20);

    // Enemies
    ctx.fillStyle="red";
    enemies.forEach(enemy=>{
        ctx.fillRect(enemy.x*cellSize+10,enemy.y*cellSize+10,cellSize-20,cellSize-20);
    });
}

document.addEventListener("keydown", e=>{
    if(e.key==="w"||e.key==="ArrowUp"){ if(player.y>0) player.y--; }
    if(e.key==="s"||e.key==="ArrowDown"){ if(player.y<gridSize-1) player.y++; }
    if(e.key==="a"||e.key==="ArrowLeft"){ if(player.x>0) player.x--; }
    if(e.key==="d"||e.key==="ArrowRight"){ if(player.x<gridSize-1) player.x++; }

    if(player.x===gold.x && player.y===gold.y){
        score++;
        document.getElementById("score").innerText = score;
        spawnGold();

        // Zorluk artışı
        if(gameSpeed>300){
            gameSpeed -= 100;
            clearInterval(gameInterval);
            gameInterval = setInterval(updateEnemies, gameSpeed);
        }
    }

    checkCollision();
    draw();
});

function restart(){
    init();
}

init();
</script>

</body>
</html>

