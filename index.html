<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dungeon Dodge Elite</title>
<style>
body{
margin:0;
background:#0e0e12;
display:flex;
flex-direction:column;
align-items:center;
font-family:Arial;
color:white;
overflow:hidden;
}
h1{
color:#ffcc00;
text-shadow:0 0 15px #ffcc00;
}
canvas{
background:#111;
border:2px solid #ffcc00;
box-shadow:0 0 20px #ffcc00;
}
.info{
margin:10px;
display:flex;
gap:20px;
}
</style>
</head>
<body>

<h1>ðŸ—¡ Dungeon Dodge Elite</h1>
<div class="info">
<div>Can: <span id="hp">3</span></div>
<div>Skor: <span id="score">0</span></div>
<div>Level: <span id="level">1</span></div>
</div>

<canvas id="game" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let keys = {};
let player = {x:300,y:200,size:15,speed:3,hp:3};
let bullets = [];
let enemies = [];
let particles = [];
let walls = [];
let score = 0;
let level = 1;
let paused = false;
let lastSpawn = 0;

document.addEventListener("keydown",e=>{
keys[e.key]=true;
if(e.key==="p") paused=!paused;
if(e.key==="r") reset();
});
document.addEventListener("keyup",e=>keys[e.key]=false);

function reset(){
player.hp=3;
score=0;
level=1;
enemies=[];
bullets=[];
particles=[];
generateWalls();
}

function generateWalls(){
walls=[];
for(let i=0;i<8;i++){
walls.push({
x:Math.random()*550,
y:Math.random()*350,
w:50+Math.random()*60,
h:20+Math.random()*40
});
}
}
generateWalls();

function spawnEnemy(){
let type=Math.random();
let speed=1+level*0.2;
let size=15;
if(type<0.3) speed*=1.8;
if(type>0.7) size=25;
enemies.push({
x:Math.random()<0.5?0:600,
y:Math.random()*400,
size,
speed
});
}

function shoot(){
if(bullets.length>5) return;
bullets.push({x:player.x,y:player.y,dx:0,dy:-6});
}

document.addEventListener("keydown",e=>{
if(e.key===" ") shoot();
});

function update(){
if(paused) return;

if(keys["ArrowUp"]) player.y-=player.speed;
if(keys["ArrowDown"]) player.y+=player.speed;
if(keys["ArrowLeft"]) player.x-=player.speed;
if(keys["ArrowRight"]) player.x+=player.speed;

walls.forEach(w=>{
if(collideRect(player,w)){
player.x+= (player.x<w.x?-5:5);
}
});

bullets.forEach(b=>{
b.y+=b.dy;
});

enemies.forEach((e,i)=>{
let dx=player.x-e.x;
let dy=player.y-e.y;
let dist=Math.hypot(dx,dy);
e.x+=dx/dist*e.speed;
e.y+=dy/dist*e.speed;

if(dist<e.size+player.size){
player.hp--;
enemies.splice(i,1);
}

bullets.forEach((b,bi)=>{
if(Math.hypot(e.x-b.x,e.y-b.y)<e.size){
score+=10;
particles.push({x:e.x,y:e.y,life:30});
enemies.splice(i,1);
bullets.splice(bi,1);
}
});
});

particles.forEach((p,i)=>{
p.life--;
if(p.life<=0) particles.splice(i,1);
});

if(Date.now()-lastSpawn>1000- level*50){
spawnEnemy();
lastSpawn=Date.now();
}

if(score>level*100){
level++;
}
}

function collideRect(c,w){
return c.x < w.x+w.w &&
c.x+c.size > w.x &&
c.y < w.y+w.h &&
c.y+c.size > w.y;
}

function draw(){
ctx.fillStyle="#111";
ctx.fillRect(0,0,600,400);

ctx.fillStyle="#444";
walls.forEach(w=>ctx.fillRect(w.x,w.y,w.w,w.h));

ctx.fillStyle="#00ffcc";
ctx.beginPath();
ctx.arc(player.x,player.y,player.size,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="red";
enemies.forEach(e=>{
ctx.beginPath();
ctx.arc(e.x,e.y,e.size,0,Math.PI*2);
ctx.fill();
});

ctx.fillStyle="#ffff00";
bullets.forEach(b=>{
ctx.fillRect(b.x,b.y,4,10);
});

ctx.fillStyle="orange";
particles.forEach(p=>{
ctx.fillRect(p.x,p.y,4,4);
});

document.getElementById("hp").innerText=player.hp;
document.getElementById("score").innerText=score;
document.getElementById("level").innerText=level;

if(player.hp<=0){
ctx.fillStyle="white";
ctx.font="40px Arial";
ctx.fillText("GAME OVER",200,200);
}
}

function loop(){
update();
draw();
requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
